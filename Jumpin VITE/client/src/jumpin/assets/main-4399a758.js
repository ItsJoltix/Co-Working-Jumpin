import"./hamburger-a33614a7.js";const M=document.querySelector("#timer-display");let S,L;function v(){const t=new Date().getTime()-S,i=t%1e3,n=Math.floor(t/1e3%60),d=Math.floor(t/1e3/60%60);M.textContent=`${String(d).padStart(2,"0")}:${String(n).padStart(2,"0")}.${String(i).padStart(3,"0")}`}function p(){clearInterval(L),S=new Date().getTime(),v(),L=setInterval(v,1)}function j(){clearInterval(L)}function T(){const e=document.querySelector("#highscorestijden");e.innerHTML="";let t=localStorage.getItem("currentLevel");t||(t=0),t=parseInt(t)+1,fetch(`http://localhost:3000/api/v1/highscores?idlevel=${t}`).then(i=>i.json()).then(i=>{console.log(i);for(let n=0;n<i.length;n++){let d=i[n].naam,g=i[n].tijd;e.innerHTML+=`<li>${d} - <span class="green">${g}s</span></li>`}}).catch(i=>{console.error("Error:",i)})}const x=document.getElementById("start"),q=document.getElementById("startScreen");let m;x.addEventListener("click",function(){const e=document.getElementById("name");m=e.value;const t=document.querySelector(".error-message");e.value===""?(t.classList.remove("hidden"),t.classList.add("visible")):(q.classList.add("hidden"),console.log("speler = "+m),p(),T())});const w=document.querySelector(".game-board"),o=document.querySelectorAll(".box");let y,r,l,a,s,f,h=0,c=parseInt(localStorage.getItem("currentLevel"));c||(c=0);let P=!1;fetch("./json/levels.json").then(e=>e.json()).then(e=>{const i=e.levels[c];H(i)}).catch(e=>{console.error("Error loading levels:",e)});function H(e){const t=document.querySelectorAll(".box");e.holes.forEach(i=>{t[i].classList.add("hole")}),e.leli.forEach(i=>{t[i].classList.add("leli")}),e.frog.forEach(i=>{t[i].classList.add("frog"),h++}),e.reigerHead&&(e.reigerHead.forEach((i,n)=>{t[i].classList.add("reigerHead"),n===0?e.reigerBottomHeadPosition1?t[i].classList.add("reigerBottomHeadPosition"):e.reigerLeftHeadPosition1?t[i].classList.add("reigerLeftHeadPosition"):e.reigerRightHeadPosition1?t[i].classList.add("reigerRightHeadPosition"):e.reigerTopHeadPosition1&&t[i].classList.add("reigerTopHeadPosition"):n===1&&(e.reigerBottomHeadPosition2?t[i].classList.add("reigerBottomHeadPosition"):e.reigerLeftHeadPosition2?t[i].classList.add("reigerLeftHeadPosition"):e.reigerRightHeadPosition2?t[i].classList.add("reigerRightHeadPosition"):e.reigerTopHeadPosition2&&t[i].classList.add("reigerTopHeadPosition"))}),e.reigerTail.forEach((i,n)=>{t[i].classList.add("reigerTail"),n===0?e.reigerBottomTailPosition1?t[i].classList.add("reigerBottomTailPosition"):e.reigerLeftTailPosition1?t[i].classList.add("reigerLeftTailPosition"):e.reigerRightTailPosition1?t[i].classList.add("reigerRightTailPosition"):e.reigerTopTailPosition1&&t[i].classList.add("reigerTopTailPosition"):n===1&&(e.reigerBottomTailPosition2?t[i].classList.add("reigerBottomTailPosition"):e.reigerLeftTailPosition2?t[i].classList.add("reigerLeftTailPosition"):e.reigerRightTailPosition2?t[i].classList.add("reigerRightTailPosition"):e.reigerTopTailPosition2&&t[i].classList.add("reigerTopTailPosition"))}))}o.forEach(e=>{e.classList.contains("frog")?h++:e.classList.contains("leli")});o.forEach(e=>{e.addEventListener("click",()=>{if(!P){if(s=Array.from(w.children).indexOf(e),o[s].classList.contains("highlight"))f==="frog"?O():f==="reiger"&&A(),b();else{b();const t=_(s);f=o[s].className.includes("frog")?"frog":o[s].className.includes("reiger")?"reiger":"",F(t,f)}re()}})});function F(e,t){if(t==="frog")y=s;else if(t==="reiger"){let i=D();i==="Head"?ee():i==="Tail"&&ie()}if(e){const i=J();i!=null&&oe(i)}}function O(){o[y].classList.remove("frog"),o[s].classList.add("frog"),o[s].classList.remove("highlight")}function A(){switch(a){case"Left":if(o[r].classList.remove("reigerHead"),o[r].classList.remove("reigerLeftHeadPosition"),o[l].classList.remove("reigerTail"),o[l].classList.remove("reigerLeftTailPosition"),s<r){let e=r<l?r:l;o[r-(e-s)].classList.add("reigerHead"),o[r-(e-s)].classList.add("reigerLeftHeadPosition"),o[l-(e-s)].classList.add("reigerTail"),o[l-(e-s)].classList.add("reigerLeftTailPosition")}else{let e=r>l?r:l;o[r+(s-e)].classList.add("reigerHead"),o[r+(s-e)].classList.add("reigerLeftHeadPosition"),o[l+(s-e)].classList.add("reigerTail"),o[l+(s-e)].classList.add("reigerLeftTailPosition")}break;case"Bottom":if(o[r].classList.remove("reigerHead"),o[r].classList.remove("reigerBottomHeadPosition"),o[l].classList.remove("reigerTail"),o[l].classList.remove("reigerBottomTailPosition"),s>r){let e=r>l?r:l;o[r+(s-e)].classList.add("reigerHead"),o[r+(s-e)].classList.add("reigerBottomHeadPosition"),o[l+(s-e)].classList.add("reigerTail"),o[l+(s-e)].classList.add("reigerBottomTailPosition")}else{let e=r<l?r:l;o[r-(e-s)].classList.add("reigerHead"),o[r-(e-s)].classList.add("reigerBottomHeadPosition"),o[l-(e-s)].classList.add("reigerTail"),o[l-(e-s)].classList.add("reigerBottomTailPosition")}break;case"Right":if(o[r].classList.remove("reigerHead"),o[r].classList.remove("reigerRightHeadPosition"),o[l].classList.remove("reigerTail"),o[l].classList.remove("reigerRightTailPosition"),s<r){let e=r<l?r:l;o[r-(e-s)].classList.add("reigerHead"),o[r-(e-s)].classList.add("reigerRightHeadPosition"),o[l-(e-s)].classList.add("reigerTail"),o[l-(e-s)].classList.add("reigerRightTailPosition")}else{let e=r>l?r:l;o[r+(s-e)].classList.add("reigerHead"),o[r+(s-e)].classList.add("reigerRightHeadPosition"),o[l+(s-e)].classList.add("reigerTail"),o[l+(s-e)].classList.add("reigerRightTailPosition")}break;case"Top":if(o[r].classList.remove("reigerHead"),o[r].classList.remove("reigerTopHeadPosition"),o[l].classList.remove("reigerTail"),o[l].classList.remove("reigerTopTailPosition"),s>r){let e=r>l?r:l;o[r+(s-e)].classList.add("reigerHead"),o[r+(s-e)].classList.add("reigerTopHeadPosition"),o[l+(s-e)].classList.add("reigerTail"),o[l+(s-e)].classList.add("reigerTopTailPosition")}else{let e=r<l?r:l;o[r-(e-s)].classList.add("reigerHead"),o[r-(e-s)].classList.add("reigerTopHeadPosition"),o[l-(e-s)].classList.add("reigerTail"),o[l-(e-s)].classList.add("reigerTopTailPosition")}break;default:a=""}}function b(){o.forEach(e=>{e.classList.remove("highlight")})}function _(e){return!!(o[e].classList.contains("frog")||o[e].classList.contains("reigerHead")||o[e].classList.contains("reigerTail"))}function J(){const e=[];if(f==="frog"){let t=$();t.length!==0&&e.push(...t);let i=W();i.length!==0&&e.push(...i);let n=N();n.length!==0&&e.push(...n);let d=z();d.length!==0&&e.push(...d)}else if(f==="reiger"){if(a==="Left"){let t=R();t.length!==0&&e.push(...t);let i=I();i.length!==0&&e.push(...i)}else if(a==="Bottom"){let t=B();t.length!==0&&e.push(...t);let i=k();i.length!==0&&e.push(...i)}else if(a==="Right"){let t=R();t.length!==0&&e.push(...t);let i=I();i.length!==0&&e.push(...i)}else if(a==="Top"){let t=B();t.length!==0&&e.push(...t);let i=k();i.length!==0&&e.push(...i)}}return e}function $(){let e=[];if(s%5!==0){let t=G(s%5);t!==void 0&&t.length!==0&&e.push(t)}return e}function N(){let e=[],t=Math.floor(s/5);if(s>=5){let i=U(t);i!==void 0&&i.length!==0&&e.push(i)}return e}function W(){let e=[],t=5-(s+1)%5;if((s+1)%5!==0){let i=K(t);i!==void 0&&i.length!==0&&e.push(i)}return e}function z(){let e=[],t=4-Math.floor(s/5);if(s<=19){let i=Q(t);i!==void 0&&i.length!==0&&e.push(i)}return e}function R(){let e=[];if(r<l?s=r:s=l,s%5!==0){let t=V(s%5);t!==void 0&&t.length!==0&&e.push(...t)}return e}function k(){let e=[];r<l?s=l:s=r;let t=4-Math.floor(s/5);if(s<=19){let i=Y(t);i!==void 0&&i.length!==0&&e.push(...i)}return e}function I(){let e=[];r<l?s=l:s=r;let t=5-(s+1)%5;if((s+1)%5!==0){let i=X(t);i!==void 0&&i.length!==0&&e.push(...i)}return e}function B(){let e=[];r<l?s=r:s=l;let t=Math.floor(r/5)-1;if(s>=5){let i=Z(t);i!==void 0&&i.length!==0&&e.push(...i)}return e}function G(e){let t=!1,i=1;for(;(o[s-i].classList.contains("frog")||o[s-i].classList.contains("leli")||o[s-i].classList.contains("reigerHead")||o[s-i].classList.contains("reigerTail"))&&(t=!0,i!==e);)i++;if(t&&s-i>=0&&s-i<=24&&u(s-i))return s-i}function K(e){let t=!1,i=1;for(;(o[s+i].classList.contains("frog")||o[s+i].classList.contains("leli")||o[s+i].classList.contains("reigerHead")||o[s+i].classList.contains("reigerTail"))&&(t=!0,i!==e);)i++;if(t&&s+i>=0&&s+i<=24&&u(s+i))return s+i}function Q(e){let t=!1,i=5,n=0;for(;(o[s+i].classList.contains("frog")||o[s+i].classList.contains("leli")||o[s+i].classList.contains("reigerHead")||o[s+i].classList.contains("reigerTail"))&&(t=!0,n++,n!==e);)i+=5;if(t&&s+i>=0&&s+i<=24&&u(s+i))return s+i}function U(e){let t=!1,i=5,n=0;for(;(o[s-i].classList.contains("frog")||o[s-i].classList.contains("leli")||o[s-i].classList.contains("reigerHead")||o[s-i].classList.contains("reigerTail"))&&(t=!0,n++,n!==e);)i+=5;if(t&&s-i>=0&&s-i<=24&&u(s-i))return s-i}function V(e){let t=[],i=1;for(;o[s-i].classList.length===1&&o[s-i].classList.contains("box")&&(s-i>=0&&s-i<=24&&t.push(s-i),i!==e);)i++;return t}function X(e){let t=[],i=1;for(;o[s+i].classList.length===1&&o[s+i].classList.contains("box")&&(s+i>=0&&s+i<=24&&t.push(s+i),i!==e);)i++;return t}function Y(e){let t=[],i=5,n=0;for(;o[s+i].classList.length===1&&o[s+i].classList.contains("box")&&(n++,s+i>=0&&s+i<=24&&t.push(s+i),n!==e);)i+=5;return t}function Z(e){let t=[],i=5,n=0;for(;s-i>=0&&o[s-i]&&o[s-i].classList.length===1&&o[s-i].classList.contains("box")&&(n++,t.push(s-i),n!==e);)i+=5;return t}function D(){if(o[s].classList.contains("reigerHead"))return"Head";if(o[s].classList.contains("reigerTail"))return"Tail"}function ee(){r=s,E(),se()}function ie(){l=s,E(),te()}function E(){o[s].classList.contains("reigerLeftHeadPosition")||o[s].classList.contains("reigerLeftTailPosition")?a="Left":o[s].classList.contains("reigerBottomHeadPosition")||o[s].classList.contains("reigerBottomTailPosition")?a="Bottom":o[s].classList.contains("reigerRightHeadPosition")||o[s].classList.contains("reigerRightTailPosition")?a="Right":(o[s].classList.contains("reigerTopHeadPosition")||o[s].classList.contains("reigerLeftTopPosition"))&&(a="Top")}function se(){switch(a){case"Left":l=s+1;break;case"Bottom":l=s-5;break;case"Right":l=s-1;break;case"Top":l=s+5;break;default:a=""}}function te(){switch(a){case"Left":r=s-1;break;case"Bottom":r=s+5;break;case"Right":r=s+1;break;case"Top":r=s-5;break;default:a=""}}function u(e){return!(o[e].classList.contains("frog")||o[e].classList.contains("leli")||o[e].classList.contains("reigerHead")||o[e].classList.contains("reigerTail"))}function oe(e){for(let t=0;t<e.length;t++)o[e[t]].classList.add("highlight")}function re(){let e=0;o.forEach(t=>{t.classList.contains("hole")&&t.classList.contains("frog")&&e++}),console.log(e),console.log(h),e===h&&setTimeout(()=>{const t=document.querySelector("#levelCompleted");t.classList.remove("hidden"),t.classList.add("popup"),console.log("you have won"),P=!0,j();let n=document.querySelector("#timer-display").innerHTML;const d={idlevel:parseInt(c)+1,naam:m,tijd:n};fetch("http://localhost:3000/api/v1/highscores",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(g=>g.json()).then(g=>{console.log(g)}).catch(g=>{console.error("Error:",g)})},100)}function le(){const e=document.querySelector("#levelCompleted");e.classList.remove("popup"),e.classList.add("hidden"),fetch("./json/levels.json").then(t=>t.json()).then(t=>{const i=t.levels;console.log(c);const n=i[c];C(),H(n),p(),T()}).catch(t=>{console.error("Error loading levels:",t)})}function ne(){const e=document.querySelector("#levelCompleted");e.classList.remove("popup"),e.classList.add("hidden"),c+=1,localStorage.setItem("currentLevel",c),p(),T(),fetch("./json/levels.json").then(t=>t.json()).then(t=>{const n=t.levels[c];console.log("level:"+c),C(),H(n)}).catch(t=>{console.error("Error loading levels:",t)})}function C(){o.forEach(e=>{e.classList.remove("hole","leli","frog","reigerHead","reigerTail","reigerBottomHeadPosition","reigerLeftHeadPosition","reigerRightHeadPosition","reigerTopHeadPosition","reigerBottomTailPosition","reigerLeftTailPosition","reigerRightTailPosition","reigerTopTailPosition")}),h=0,P=!1}document.querySelector("#redo").addEventListener("click",le);document.querySelector("#next").addEventListener("click",ne);(function(){const e=document.querySelector(".mute-btn");let t=document.querySelector(".mute-btn > img"),i=document.querySelector("#background_audio");e.addEventListener("click",function(){i.muted?(i.muted=!1,t.src="./recources/172479_high_volume_icon.svg"):(i.muted=!0,t.src="./recources/172512_mute_icon.svg")})})();
